(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t){},176:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(15),o=n.n(i),c=n(8),r=n(9),l=n(12),m=n(10),u=n(11),p=n(20),d=n(79),h=n.n(d),f=(n(24),n(43));n(21);var v=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(f.a,{hideProgressBar:!0,newestOnTop:!0,autoClose:3e3,closeOnClick:!0})}}]),t}(a.Component);n(21);var g=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("h3",null,"Chat Box ",s.a.createElement("br",null),s.a.createElement("h6",null,"Username: ",this.props.name),s.a.createElement(v,null))}}]),t}(a.Component),b=n(179),k=n(177);n(21);var O=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return this.props.users>0?s.a.createElement("div",null,s.a.createElement(b.a,{title:"View Users",id:"collasible-nav-dropdown"},this.props.user_list.map(function(t,n){var a=e.props.notifications[t];return a||(a=0),t!==e.props.name?a>0?s.a.createElement("div",null,s.a.createElement(b.a.Item,{href:"#"+n+"link",key:n,onClick:function(n){n.preventDefault(),e.props.updateclicked({name:t})}},t," ",s.a.createElement(k.a,{variant:"dark"}," ",a," "))):s.a.createElement("div",null,s.a.createElement(b.a.Item,{key:n,href:"#"+n+"link",onClick:function(n){n.preventDefault(),e.props.updateclicked({name:t})}},t)):""}))):""}}]),t}(a.Component),E=n(178),j=n(180);n(21);var y=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(E.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",fixedTop:!0},s.a.createElement(E.a.Brand,{href:"#home"},"Active Users ",s.a.createElement(k.a,{variant:"light"}," ",this.props.users," ")," "),s.a.createElement(E.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),s.a.createElement(E.a.Collapse,{id:"responsive-navbar-nav"},s.a.createElement(j.a,{className:"mr-auto"},s.a.createElement(O,{users:this.props.users,notifications:this.props.notifications,name:this.props.name,updateclicked:this.props.updateclicked,user_list:this.props.user_list})))))}}]),t}(a.Component);n(21);var C=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.messages[this.props.opponent];return t||(t=[]),s.a.createElement("div",{className:"messages",id:"messageList"},s.a.createElement("div",{className:"chatboxclass",id:"chatbox"},t.map(function(t,n){return t.message&&""!==t.message?t.username===e.props.name?s.a.createElement("div",{className:"message from-me",key:n},s.a.createElement("div",{className:"message-body"},t.message)):s.a.createElement("div",{className:"message ",key:n},s.a.createElement("div",{className:"message-body"},s.a.createElement("div",{className:"username"},t.username),t.message)):""})))}}]),t}(a.Component);C.defaultProps={messages:{},opponent:""};var x=C,w=n(85);n(21);var B=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"chat-input"},s.a.createElement("input",{type:"text",name:"textmsg",id:"textmsg",disabled:!0,placeholder:"Enter your message and press enter...",required:!0}),s.a.createElement(w.a,{style:{display:"none"},className:"primary",name:"click",id:"click",onClick:this.props.handleclick},"Click Me"))}}]),t}(a.Component),N=(n(148),n(88));n(21);var I=function(e){function t(e){var n;return Object(c.a)(this,t),console.log("inside constructor"),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).handleclick=n.handleclick.bind(Object(p.a)(Object(p.a)(n))),n.sendnotifications=n.sendnotifications.bind(Object(p.a)(Object(p.a)(n))),n.updateclicked=n.updateclicked.bind(Object(p.a)(Object(p.a)(n))),n.state={socket:h()("/"),messages:{},users:0,name:"user"+Math.floor(1e3*Math.random()),user_list:[],opponent:"",notifications:{}},n.state.socket.emit("setname",n.state.name),console.log("client emit setname"),n.state.socket.on("users_list",function(e){console.log("server sent users_list"),console.log(JSON.stringify(e)),n.setState({user_list:e.list})}),n.state.socket.on("users_online",function(e){console.log("server sent users_online "+e),e<=1?(document.getElementById("textmsg").disabled=!0,n.setState({messages:{},opponent:"",notifications:{},users:0})):n.setState({users:e-1})}),n.state.socket.on("usermessage",function(e){console.log("server sent message "),console.log(JSON.stringify(e));var t=n.state.messages,a=t[e.username];if(a||(a=[]),a.push(e),t[e.username]=a,n.state.opponent!==e.username){var s=e.username+":- "+e.message;n.sendnotifications(s);var i=n.state.notifications;i[e.username]>0?i[e.username]+=1:i[e.username]=1,n.setState({messages:t,notifications:i})}else n.setState({messages:t})}),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"sendnotifications",value:function(e){f.b.info(e,{bodyClassName:Object(N.css)({fontSize:"20px"})})}},{key:"componentDidMount",value:function(){console.log("componentDidMount"),document.getElementById("textmsg").addEventListener("keyup",function(e){13===e.keyCode&&(e.preventDefault(),document.getElementById("click").click())})}},{key:"updateclicked",value:function(e){if(console.log("updateclicked"),this.state.opponent!==e.name){document.getElementById("textmsg").disabled=!1,document.getElementById("textmsg").focus();var t=this.state.notifications;t[e.name]=0,this.setState({opponent:e.name,notifications:t})}}},{key:"handleclick",value:function(){if(console.log("handleclick"),!1===document.getElementById("textmsg").disabled){var e=document.getElementById("textmsg").value,t=this.state.messages,n=t[this.state.opponent];n||(n=[]),n.push({username:this.state.name,message:e}),t[this.state.opponent]=n,this.setState({messages:t});var a={value:e,receiver:this.state.opponent,sender:this.state.name};this.state.socket.emit("click",a),document.getElementById("textmsg").value=""}}},{key:"componentDidUpdate",value:function(){console.log("componentDidUpdate");var e=this.state.messages[this.state.opponent];if(e||(e=[]),e.length>0){var t=document.getElementById("messageList");t.scrollTop=t.scrollHeight}}},{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement(g,{name:this.state.name}),s.a.createElement(y,{users:this.state.users,user_list:this.state.user_list,notifications:this.state.notifications,name:this.state.name,updateclicked:this.updateclicked}),s.a.createElement(x,{messages:this.state.messages,opponent:this.state.opponent,name:this.state.name}),s.a.createElement(B,{handleclick:this.handleclick}))}}]),t}(a.Component);n(21);var S=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(I,null)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},21:function(e,t,n){},89:function(e,t,n){e.exports=n(176)}},[[89,1,2]]]);
//# sourceMappingURL=main.1398b91e.chunk.js.map